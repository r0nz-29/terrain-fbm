(this["webpackJsonpdiscover-three-js"]=this["webpackJsonpdiscover-three-js"]||[]).push([[0],{20:function(e,n,t){},22:function(e,n,t){"use strict";t.r(n);var i=t(9),r=t.n(i),a=t(11),o=t.n(a),s=t(0),c=t(1),l=t(5),h=function(e,n,t){n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix(),t.setSize(e.clientWidth,e.clientHeight),t.setPixelRatio(window.devicePixelRatio)},u=t(12),v=t(13),p=function(){function e(n,t,i){Object(s.a)(this,e),this._camera=n,this._scene=t,this._renderer=i,this._needsUpdate=[],this._controls=function(e,n,t){if("orbit"===t){var i=new u.a(e,n);return i.enableDamping=!0,i}if("firstPerson"===t)return new v.a(e,n)}(this._camera,this._renderer.domElement,"orbit"),this._objectsWithBehaviour=[]}return Object(c.a)(e,[{key:"start",value:function(e,n){var t=this;this._renderer.setAnimationLoop((function(){t._controls.update(e.getDelta()),t._needsUpdate.forEach((function(e){e.material.uniforms.u_time.value+=.01})),t._objectsWithBehaviour.forEach((function(e){e.behaviour()})),t._renderer.render(t._scene,t._camera)}))}},{key:"stop",value:function(){this._renderer.setAnimationLoop(null)}}]),e}(),m=t.p+"static/media/river.d1debb43.png",d=t.p+"static/media/sand.44b471ae.jpg",f=t.p+"static/media/water1.babf6e90.jpg",_=function(){function e(n){Object(s.a)(this,e),this._scene=new l.l,this._camera=function(){var e=new l.i(35,1,.1,100);return e.position.set(-5,8,10),e}(),this._renderer=function(){var e=new l.s({antialias:!0,alpha:!0});return e.physicallyCorrectLights=!0,e.shadowMap.enabled=!0,e}(),n.appendChild(this._renderer.domElement),this._resizer=function(e,n,t){h(e,n,t),window.addEventListener("resize",(function(){h(e,n,t)}))}(n,this._camera,this._renderer),this._time=0,this._loop=new p(this._camera,this._scene,this._renderer);var t=function(){var e=new l.b("white");return e.position.set(0,4,10),e.castShadow=!0,e}(),i=function(e){var n=(new l.p).load(m);n.wrapS=l.h,n.wrapT=l.h;var t=(new l.p).load(d),i=(new l.p).load(f),r=new l.m({uniforms:{u_time:{value:e},u_heightmap:{value:n},u_colormap:{value:t},u_water:{value:i}},vertexShader:"\n  uniform float u_time;\n  uniform sampler2D u_water;\n  uniform sampler2D u_heightmap;\n  varying float height;\n  varying vec3 normalInterp;\n  varying vec3 pos;\n  varying vec2 vuv;\n\n  void main() {\n    vec3 p = position;\n    vuv = uv;\n    mat4 boilerplate = projectionMatrix * modelViewMatrix;\n    vec3 heightData = texture2D(u_heightmap, uv).rgb;\n    height = 10.0*(heightData.x + heightData.y + heightData.z); \n    vec3 newP = p + vec3(0.0, 0.0, 0.1*height);\n    vec3 newNormal = normal + vec3(0.01*height);\n\n    vec4 pos4 = modelViewMatrix * vec4(newP, 1.0);\n\n    normalInterp = newNormal;\n    pos = vec3(pos4) / pos4.w;\n\n    gl_Position = boilerplate * vec4(newP, 1.0);\n  }\n",fragmentShader:" \n varying vec3 normalInterp;\n varying vec3 pos;\n\n const vec3 lightPos \t= vec3(200,60,100);\n const vec3 ambientColor = vec3(0.2, 0.0, 0.0);\n const vec3 diffuseColor = vec3(0.3961, 0.2627, 0.1294);\n const vec3 specColor \t= vec3(1.0, 1.0, 1.0);\n \n void main() {\n   vec3 normal = mix(normalize(normalInterp), normalize(cross(dFdx(pos), dFdy(pos))), 0.3);\n   vec3 lightDir = normalize(lightPos - pos);\n \n   float lambertian = max(dot(lightDir,normal), 0.0);\n   float specular = 0.0;\n \n   if(lambertian > 0.0) {\n     vec3 viewDir = normalize(-pos);\n     vec3 halfDir = normalize(lightDir + viewDir);\n     float specAngle = max(dot(halfDir, normal), 0.0);\n     specular = pow(specAngle, 16.0);\n   }\n \n   gl_FragColor = vec4(ambientColor + lambertian * diffuseColor + specular * specColor, 1.0);\n }\n",side:l.c}),a=new l.j(7,7,1e3,1e3);return new l.g(a,r)}(this._time);i.rotation.x=-Math.PI/2,this._scene.add(i,t),this._clock=new l.a}return Object(c.a)(e,[{key:"start",value:function(){this._loop.start(this._clock,this._time)}},{key:"stop",value:function(){this._loop.stop()}},{key:"render",value:function(){this._renderer.render(this._scene,this._camera)}}]),e}(),g=(t(20),function(){return r.a.useEffect((function(){var e=document.getElementById("root");new _(e).start()}),[]),null}),w=t(14);o.a.render(Object(w.jsx)(g,{}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.ec049e3a.chunk.js.map