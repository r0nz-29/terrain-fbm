{"version":3,"sources":["World/resizer.js","World/Loop.js","World/controls.js","World/maps/real3.png","World/maps/map1_color.jpg","World/maps/water1.jpg","World/index.js","World/scene.js","World/camera.js","World/renderer.js","World/lights.js","World/terrain.js","App.jsx","index.js"],"names":["setSize","container","camera","renderer","aspect","clientWidth","clientHeight","updateProjectionMatrix","setPixelRatio","window","devicePixelRatio","Loop","scene","this","_camera","_scene","_renderer","_needsUpdate","_controls","canvas","type","controls","OrbitControls","enableDamping","FirstPersonControls","createControls","domElement","_objectsWithBehaviour","clock","time","setAnimationLoop","update","getDelta","forEach","obj","material","uniforms","u_time","value","behaviour","render","World","THREE","position","set","createCamera","antialias","alpha","physicallyCorrectLights","createRenderer","appendChild","_resizer","addEventListener","resizer","_time","_loop","light","aLight","createLights","land","heightMap","load","heightmap","wrapS","wrapT","colorMap","colormap","Water","water","u_heightmap","u_colormap","u_water","vertexShader","fragmentShader","side","wireframe","geometry","createTerrain","rotation","x","Math","PI","push","add","_clock","start","stop","App","React","useEffect","root","document","getElementById","ReactDOM"],"mappings":"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","file":"static/js/main.7afd8a4e.chunk.js","sourcesContent":["const setSize = (container, camera, renderer) => {\n  camera.aspect = container.clientWidth / container.clientHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(container.clientWidth, container.clientHeight);\n  renderer.setPixelRatio(window.devicePixelRatio);\n};\n\nexport const resizer = (container, camera, renderer) => {\n  setSize(container, camera, renderer);\n  window.addEventListener('resize', ()=>{\n    setSize(container, camera, renderer);\n  });\n}\n","import { createControls } from './controls';\n\nclass Loop {\n  constructor(camera, scene, renderer){\n    this._camera = camera;\n    this._scene = scene;\n    this._renderer = renderer;\n    this._needsUpdate = [];\n    this._controls = createControls(this._camera, this._renderer.domElement, 'orbit');\n    // this._controls.lookSpeed = 0.2;\n    // this._controls.movementSpeed = 0.4;\n    // this._controls.noFly = true;\n    // this._controls.lookVertical = true;\n    // this._controls.constrainVertical = true;\n    // this._controls.verticalMin = 1.3;\n    // this._controls.verticalMax = 1.8;\n    // this._controls.activeLook = true;\n    // console.log(this._controls);\n    this._objectsWithBehaviour = [];\n  }\n\n  start(clock, time) {\n    this._renderer.setAnimationLoop(()=>{\n      //update controls\n      this._controls.update(clock.getDelta());\n\n      // //update uniforms\n      this._needsUpdate.forEach((obj)=>{\n        obj.material.uniforms.u_time.value += 0.01;\n      })\n\n      //animate objects\n      this._objectsWithBehaviour.forEach((obj)=>{\n        obj.behaviour();\n      });\n\n      //re-render scene\n      this._renderer.render(this._scene, this._camera);\n    });\n  }\n\n  stop() {\n    this._renderer.setAnimationLoop(null);\n  }\n\n}\n\nexport {Loop};","import {OrbitControls} from 'three/examples/jsm/controls/OrbitControls';\nimport {FirstPersonControls} from 'three/examples/jsm/controls/FirstPersonControls';\n\nexport const createControls = (camera, canvas, type) => {\n  if(type===\"orbit\") {\n    const controls = new OrbitControls(camera, canvas);\n    controls.enableDamping = true;\n    return controls;\n  };\n  if(type===\"firstPerson\"){\n    const controls = new FirstPersonControls(camera, canvas);\n    return controls;\n  }\n}","export default __webpack_public_path__ + \"static/media/real3.d7b42791.png\";","export default __webpack_public_path__ + \"static/media/map1_color.d9782aab.jpg\";","export default __webpack_public_path__ + \"static/media/water1.babf6e90.jpg\";","import * as THREE from 'three';\nimport { createScene } from './scene';\nimport { createCamera } from './camera';\nimport { createRenderer } from './renderer';\n// import { Cube } from './Cube';\nimport { createLights } from './lights';\nimport { resizer } from './resizer';\nimport {Loop} from './Loop';\nimport {createTerrain} from './terrain';\n\nclass World {\n  constructor(container) {\n    this._scene = createScene();\n    this._camera = createCamera();\n    this._renderer = createRenderer();\n    container.appendChild(this._renderer.domElement);\n    this._resizer = resizer(container, this._camera, this._renderer);\n    this._time = 0.0;\n    this._loop = new Loop(this._camera, this._scene, this._renderer);\n    const {light, aLight} = createLights();\n    const land = createTerrain(this._time);\n    land.rotation.x = -Math.PI / 2;;\n    this._loop._needsUpdate.push(land);\n    this._scene.add(land, light, aLight);\n    this._clock = new THREE.Clock();\n  }\n\n  start() {\n    this._loop.start(this._clock, this._time);\n  }\n\n  stop() {\n    this._loop.stop();\n  }\n\n  render() {\n    this._renderer.render(this._scene, this._camera);\n  }\n}\nexport { World };","import * as THREE from 'three';\n\nexport const createScene = () => {\n  const scene = new THREE.Scene();\n  return scene;\n}","import * as THREE from 'three';\n\nexport const createCamera = () => {\n  const camera = new THREE.PerspectiveCamera(\n    35,\n    1,\n    0.1,\n    100\n  );\n  camera.position.set(0, 0, 2);\n  return camera;\n}","import * as THREE from 'three';\n\nexport const createRenderer = () => {\n  const renderer = new THREE.WebGLRenderer({antialias: true, alpha:true});\n  renderer.physicallyCorrectLights = true;\n  return renderer;\n}","import * as THREE from 'three';\n\nexport const createLights = () => {\n  const light = new THREE.DirectionalLight('white', 8);\n  light.position.set(10, 10, 10);\n  const aLight = new THREE.AmbientLight(\"white\", 2);\n  return {light, aLight};\n} ","import * as THREE from 'three';\nimport heightmap from './maps/real3.png';\nimport colormap from './maps/map1_color.jpg';\nimport water from './maps/water1.jpg';\n\nconst VS = `\n  uniform float u_time;\n  uniform sampler2D u_water;\n  uniform sampler2D u_heightmap;\n  varying float height;\n  varying vec2 vuv;\n\n  void main() {\n    vuv = uv;\n    mat4 boilerplate = projectionMatrix * modelViewMatrix;\n    vec3 p = position;\n    vec3 heightData = texture2D(u_heightmap, uv).rgb;\n    vec3 waterData = texture2D(u_water, sin(uv*0.1+0.01*u_time)).rgb;\n    // height = 0.3*sin(mix(0.0, 1.0, 10.0*u_time+p.y+p.x));\n    height = 10.0*(heightData.x + heightData.y + heightData.z); \n    // if(height < 0.2) { height = 0.3*(waterData.x + waterData.y + waterData.z) ;}\n    vec3 newP = p + vec3(0.0, 0.0, 0.1*height);\n    gl_Position = boilerplate * vec4(newP, 1.0);\n  }\n`;\n\nconst FS = `\n  uniform sampler2D u_colormap;\n  uniform float u_time;\n  uniform sampler2D u_water;\n  varying float height;\n  varying vec2 vuv;\n\n  void main() {\n    vec3 teXture = texture2D(u_colormap, vuv).rgb;\n    vec3 water = texture2D(u_water, sin(vuv*0.1+0.01*u_time)).rgb;\n    vec3 color = teXture;\n    // if(height < 0.7) {color = water;}\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n  }\n`;\n\nexport const createTerrain = (time) => {\n  const heightMap = new THREE.TextureLoader().load(heightmap);\n  heightMap.wrapS = THREE.MirroredRepeatWrapping;\n  heightMap.wrapT = THREE.MirroredRepeatWrapping;\n  const colorMap = new THREE.TextureLoader().load(colormap);\n  const Water = new THREE.TextureLoader().load(water);\n  const material = new THREE.ShaderMaterial({\n    uniforms: {\n      u_time: {\n        value: time,\n      },\n      u_heightmap: {\n        value: heightMap,\n      },\n      u_colormap: {\n        value: colorMap,\n      },\n      u_water: {\n        value: Water,\n      }\n    },\n    vertexShader: VS,\n    fragmentShader: FS,\n    side: THREE.DoubleSide,\n    wireframe: true,\n  });\n  const geometry = new THREE.PlaneGeometry(7, 7, 400, 400);\n  const plane = new THREE.Mesh(geometry, material);\n  // console.log(geometry);\n  return plane;\n}","import React from \"react\";\nimport { World } from \"./World\";\nimport \"./App.css\";\n\nconst App = () => {\n  React.useEffect(() => {\n    const root = document.getElementById(\"root\");\n    const world = new World(root);\n    world.start();\n  }, []);\n  return null;\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}